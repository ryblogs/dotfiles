# ~/.config/helix/config.toml
# Updated: Tab for completion, Ctrl+]/[ for indent (VS Code style)

#━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# THEME & APPEARANCE
#━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

theme = "ayu_dark"

#━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# EDITOR SETTINGS
#━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[editor]
# Basic behavior
mouse = true
middle-click-paste = true
auto-save = false
auto-pairs = true

# Display
line-number = "absolute"
cursorline = true
indent-guides.render = true

# System integration
clipboard-provider = "pasteboard" # macOS clipboard

# Bufferline
bufferline = "always"

# Completion settings - keep Tab for completion!
auto-completion = true  # Tab can trigger completion

[editor.statusline]
left = ["mode", "spinner"]
center = ["file-name"]
right = [
    "diagnostics",
    "selections",
    "position",
    "file-encoding",
    "file-line-ending",
    "file-type",
]

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.file-picker]
hidden = false

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# NORMAL MODE KEYBINDINGS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[keys.normal]
# ── File Operations ───────────────────────────────────────────────
"C-s" = ":write"      # Save file
"C-q" = ":quit"       # Quit
"C-S-q" = ":quit!"    # Force quit
"C-b" = "file_picker" # File explorer
"C-o" = "file_picker" # File explorer (alt)
"C-e" = "file_explorer"  # Hierarchical file explorer
"C-y" = [  # Yazi file manager integration
  ':sh rm -f /tmp/unique-file',
  ':insert-output yazi %{buffer_name} --chooser-file=/tmp/unique-file',
  ':insert-output echo "\x1b[?1049h\x1b[?2004h" > /dev/tty',
  ':open %sh{cat /tmp/unique-file}',
  ':redraw',
]

# ── Clipboard Operations ──────────────────────────────────────────
"C-c" = "yank_main_selection_to_clipboard"  # Copy
"C-v" = "paste_clipboard_after"             # Paste
"C-x" = ["yank_main_selection_to_clipboard", "delete_selection_noyank"] # Cut (no double-yank)

# ── Undo/Redo ─────────────────────────────────────────────────────
"C-z" = "undo"   # Undo
"C-S-z" = "redo" # Redo

# ── Selection ─────────────────────────────────────────────────────
"C-a" = "select_all"               # Select all
"C-w" = "select_textobject_around" # Word selection
"C-l" = "extend_line_below"        # Line selection
"esc" = "collapse_selection"       # Deselect

# ── Text Selection with Shift+Arrows ──────────────────────────────
"S-left" = ["select_mode", "extend_char_left"]
"S-right" = ["select_mode", "extend_char_right"]
"S-up" = ["select_mode", "extend_line_up"]
"S-down" = ["select_mode", "extend_line_down"]

# ── Word-wise Selection ───────────────────────────────────────────
"C-S-left" = ["select_mode", "extend_prev_word_start"]
"C-S-right" = ["select_mode", "extend_next_word_end"]

# ── Page-wise Selection ───────────────────────────────────────────
"S-pageup" = ["select_mode", "page_up"]
"S-pagedown" = ["select_mode", "page_down"]

# ── Search & Replace ──────────────────────────────────────────────
"C-f" = "search"          # Find
"C-n" = "search_next"     # Find next
"C-p" = "search_prev"     # Find previous
"C-h" = "replace"         # Find and replace
"C-S-f" = "global_search" # Global search

# ── Navigation ────────────────────────────────────────────────────
"C-g" = "goto_line"           # Go to line
"C-left" = "jump_view_left"   # Navigate splits
"C-right" = "jump_view_right"
"C-up" = "jump_view_up"
"C-down" = "jump_view_down"

# ── Text Manipulation ─────────────────────────────────────────────
"C-d" = [ # Duplicate line
    "extend_line_below",
    "yank_main_selection_to_clipboard",
    "paste_clipboard_after",
]
"C-ret" = "open_below"    # New line below
"C-S-ret" = "open_above"  # New line above
"C-/" = "toggle_comments" # Comment toggle

# ── Indentation (VS Code style) ───────────────────────────────────
"C-]" = "indent"          # Indent (Ctrl+])
"C-[" = "unindent"        # Unindent (Ctrl+[)

# ── Deletion ──────────────────────────────────────────────────────
"del" = "delete_char_forward"   # Forward delete
"backspace" = "delete_char_backward" # Backward delete

# ── Command Access ────────────────────────────────────────────────
"C-S-p" = "command_palette" # Command palette
";" = "command_mode"        # Command mode

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# INSERT MODE KEYBINDINGS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[keys.insert]
# ── File Operations ───────────────────────────────────────────────
"C-s" = ":write"                    # Save file
"C-q" = ["normal_mode", ":quit"]    # Quit
"C-S-q" = ["normal_mode", ":quit!"] # Force quit

# ── Clipboard Operations ──────────────────────────────────────────
"C-c" = ["normal_mode", "yank_main_selection_to_clipboard", "insert_mode"]
"C-v" = "paste_clipboard_before" # Paste
"C-x" = [ # Cut (no double-yank)
    "normal_mode",
    "yank_main_selection_to_clipboard",
    "delete_selection_noyank",
    "insert_mode",
]

# ── Undo ──────────────────────────────────────────────────────────
"C-z" = ["normal_mode", "undo", "insert_mode"]

# ── Selection ─────────────────────────────────────────────────────
"C-a" = ["normal_mode", "select_all"] # Select all

# ── Text Selection from Insert Mode ───────────────────────────────
"S-left" = ["normal_mode", "select_mode", "extend_char_left"]
"S-right" = ["normal_mode", "select_mode", "extend_char_right"]
"S-up" = ["normal_mode", "select_mode", "extend_line_up"]
"S-down" = ["normal_mode", "select_mode", "extend_line_down"]

# ── Word-wise Selection ───────────────────────────────────────────
"C-S-left" = ["normal_mode", "select_mode", "extend_prev_word_start"]
"C-S-right" = ["normal_mode", "select_mode", "extend_next_word_end"]

# ── Page-wise Selection ───────────────────────────────────────────
"S-pageup" = ["normal_mode", "select_mode", "page_up"]
"S-pagedown" = ["normal_mode", "select_mode", "page_down"]

# ── Search ────────────────────────────────────────────────────────
"C-n" = ["normal_mode", "search_next", "insert_mode"]
"C-p" = ["normal_mode", "search_prev", "insert_mode"]

# ── Text Manipulation ─────────────────────────────────────────────
"C-/" = ["normal_mode", "toggle_comments", "insert_mode"]

# ── Indentation (VS Code style) ───────────────────────────────────
"C-]" = ["normal_mode", "indent", "insert_mode"]
"C-[" = ["normal_mode", "unindent", "insert_mode"]

# ── Tab & Completion ──────────────────────────────────────────────
# Explicitly make Tab insert tab/spaces (not jump out of auto-pairs)
"tab" = "insert_tab"
# C-space for manual completion
"C-space" = "completion"

# ── Deletion ──────────────────────────────────────────────────────
"del" = "delete_char_forward"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# SELECT MODE KEYBINDINGS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[keys.select]
# ── Mode Control ──────────────────────────────────────────────────
"esc" = ["collapse_selection", "normal_mode"] # Exit selection

# ── File Operations ───────────────────────────────────────────────
"C-q" = ["normal_mode", ":quit"]    # Quit
"C-S-q" = ["normal_mode", ":quit!"] # Force quit

# ── Clipboard Operations ──────────────────────────────────────────
"C-c" = "yank_main_selection_to_clipboard"  # Copy selection
"C-x" = ["yank_main_selection_to_clipboard", "delete_selection_noyank"] # Cut (no double-yank)
"C-v" = "replace_selections_with_clipboard" # Paste over selection

# ── Selection Extension ───────────────────────────────────────────
"S-left" = "extend_char_left"   # Extend with arrows
"S-right" = "extend_char_right"
"S-up" = "extend_line_up"
"S-down" = "extend_line_down"

# ── Word-wise Selection ───────────────────────────────────────────
"C-S-left" = "extend_prev_word_start"
"C-S-right" = "extend_next_word_end"

# ── Page-wise Selection ───────────────────────────────────────────
"S-pageup" = "page_up"
"S-pagedown" = "page_down"

# ── Text Manipulation ─────────────────────────────────────────────
"C-/" = "toggle_comments"  # Comment toggle

# ── Indentation (VS Code style) ───────────────────────────────────
"C-]" = "indent"    # Indent selection
"C-[" = "unindent"  # Unindent selection

# ── Deletion (GUI-like - delete and start typing) ─────────────────
"del" = ["delete_selection_noyank", "insert_mode"]
"backspace" = ["delete_selection_noyank", "insert_mode"]
